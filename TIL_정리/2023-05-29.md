# 2023-05-29

### π“ ν•™μµ κ³„ν
- JVM λ‚΄ μ‹¤ν–‰ μ—”μ§„
  - Interpreter
  - JIT Compiler
- κΌ¬λ¦¬λ¬ΌκΈ° μ§λ¬Έ μ¤ν„°λ”” μ§„ν–‰ λ° λ‚΄μ© μ •λ¦¬

### βοΈ TIL
- JVM λ‚΄ Execution Engine
  - Interpreter
  - JIT Compiler
- κΌ¬λ¦¬λ¬ΌκΈ° μ§λ¬Έ μ¤ν„°λ”” (2023-05-29 7μ°¨)
  - `==`, `equals`, `hashcode`
  - HashTable, HashMap
  - Interface vs Abstract Class
  - Final
  - Enum
  - Rehashing
  - Marker Interface


## JVMμ Execution Engine
- ν΄λμ¤ λ΅λ”λ¥Ό ν†µν•΄μ„ JVM λ‚΄μ λ°νƒ€μ„ λ°μ΄ν„° μμ—­μ— λ°°μΉλ λ°”μ΄νΈ μ½”λ“λ¥Ό ν• μ¤„ μ”© μ‹¤ν–‰ν•λ” μ—­ν• μ„ ν•λ‹¤
- μλ°” λ°”μ΄νΈ μ½”λ“λ¥Ό λ…λ Ήμ–΄ λ‹¨μ„λ΅ μ½μ–΄μ„ μ‹¤ν–‰ν•λ‹¤
- κ·Έλ°λ°, μλ°” λ°”μ΄νΈ μ½”λ“λ” κΈ°κ³„κ°€ λ°”λ΅ μν–‰ν•  μ μλ” μ–Έμ–΄ ν•νƒκ°€ μ•„λ‹ μ¤‘κ°„ μ½”λ“ ν•νƒμ—¬μ„
  - μ‹¤ν–‰ μ—”μ§„μ€ λ°”μ΄νΈ μ½”λ“λ¥Ό μ‹¤μ λ΅ JVM λ‚΄λ¶€μ—μ„ κΈ°κ³„κ°€ μ‹¤ν–‰ν•  μ μλ” ν•νƒλ΅ λ³€κ²½ν•λ‹¤

### μ‹¤ν–‰ μ—”μ§„μ΄ JVM λ‚΄λ¶€μ—μ„ κΈ°κ³„κ°€ μ‹¤ν–‰ν•  μ μλ” ν•νƒλ΅ λ³€κ²½ν•λ” λ°©μ‹ 2κ°€μ§€
1. μΈν„°ν”„λ¦¬ν„° (Interpreter)
2. JIT μ»΄νμΌλ¬ (Just-In-Time Compiler) 

> μ»΄ν“¨ν„° ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•λ” λ°©μ‹ 2κ°€μ§€
> 1. μΈν„°ν”„λ¦¬νΈ λ°©μ‹
>     - ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•  λ• λ§λ‹¤ μ»΄ν“¨ν„°κ°€ μ•μ•„ λ“¤μ„ μ μλ” μ–Έμ–΄λ΅ λ³€ν™ν•λ” μ‘μ—…μ„ μν–‰ν•λ” λ°©μ‹
>     - κ°„νΈν•μ§€λ§ μ„±λ¥μ΄ λ§¤μ° λλ¦¬λ‹¤
> 2. μ •μ  μ»΄νμΌ λ°©μ‹
>     - μ‹¤ν–‰ν•κΈ° μ „ μ»΄ν“¨ν„°κ°€ μ•μ•„ λ“¤μ„ μ μλ” μ–Έμ–΄λ΅ λ―Έλ¦¬ λ³€ν™ν•λ‹¤ (λ³€ν™ μ‘μ—…μ€ λ”± ν•λ²λ§ μν–‰ν•λ‹¤)

## Interpreter
-  λ°”μ΄νΈμ½”λ“ λ…λ Ήμ–΄λ¥Ό ν•λ‚μ”© μ½μ–΄μ„ ν•΄μ„ν•κ³  μ‹¤ν…ν•λ‹¤
-  ν•λ‚μ”© ν•΄μ„ν•κ³  μ‹¤ν–‰ν•λ―€λ΅ λ°”μ΄νΈ μ½”λ“ ν•λ‚ν•λ‚μ ν•΄μ„μ€ λΉ λ¥Έλ°, μΈν„°ν”„λ¦¬ν… κ²°κ³Όμ μ‹¤ν–‰ μμ²΄λ” λλ¦¬λ‹¤

## JIT Compiler (Just-In-Time Compiler)
- μΈν„°ν”„λ¦¬ν„°μ λ‹¨μ μ„ λ³΄μ™„ν•κΈ° μ„ν•΄ λ„μ…λ μ‚¬ν•­μ΄λ‹¤
  - μ™?
    - μΈν„°ν”„λ¦¬ν„°μ λ‹¨μ μ΄ κ²°κµ­ ν•λ‚μ”© ν•΄μ„ν•κ³  μ‹¤ν–‰ν•λ―€λ΅ μΈν„°ν”„λ¦¬ν… κ²°κ³Όμ μ‹¤ν–‰ μμ²΄κ°€ λλ¦¬λ‹¤λ” μ 
    - μΈν„°ν”„λ¦¬ν„°λ” ν•λ‚μ λ©”μ„λ“κ°€ μ—¬λ¬λ² νΈμ¶λ  λ• λ§λ‹¤ μΈν„°ν”„λ¦¬ν„°λ¥Ό μ‘λ™ν•΄μ•Ό ν•λ‹¤
- μΈν„°ν”„λ¦¬ν„° λ°©μ‹μΌλ΅ μ‹¤ν–‰ν•λ‹¤κ°€ μ μ ν• μ‹μ μ— λ°”μ΄νΈμ½”λ“ μ „μ²΄λ¥Ό μ»΄νμΌν•΄μ„ λ„¤μ΄ν‹°λΈ μ½”λ“λ΅ λ³€κ²½ν•κ³ , 
- κ·Έ μ΄ν›„μ—λ” ν•΄λ‹Ή λ©”μ„λ“λ¥Ό λ” μ΄μƒ μΈν„°ν”„λ¦¬ν…ν•μ§€ μ•κ³  λ„¤μ΄ν‹°λΈ μ½”λ“λ΅ μ§μ ‘ μ‹¤ν–‰ν•λ” λ°©μ‹μ΄λ‹¤

### JIT μ»΄νμΌλ¬ λ„μ…μ μ¥μ 
- JITλ¥Ό μ‚¬μ©ν•λ©΄ λ°λ³µμ μΌλ΅ μν–‰λλ” μ½”λ“λ¥Ό λ„¤μ΄ν‹°λΈ μ½”λ“λ΅ λ³€κ²½ν•΄μ„ μ§μ ‘ μ‹¤ν–‰ν•λ©΄ λ§¤μ° λΉ λ¥Έ μ„±λ¥μ„ λ³΄μΈλ‹¤
- κ·Έλ¦¬κ³ , λ„¤μ΄ν‹°λΈ μ½”λ“λ” μΊμ‹μ— λ‹΄μ•„λ‘μ—λ‹¤κ°€ μ¬μ‚¬μ©ν•λ―€λ΅ ν• λ² JIT μ»΄νμΌλ¬λ¥Ό ν†µν•΄ λ³€ν™λ μ½”λ“λ” κ³„μ† λΉ λ¥΄κ² μ‚¬μ©ν•  μ μλ‹¤

### JIT μ»΄νμΌλ¬μ λ‹¨μ 
- JIT μ»΄νμΌλ¬κ°€ μ»΄νμΌν•λ” κ³Όμ •μ€ λ°”μ΄νΈμ½”λ“λ¥Ό ν•λ‚μ”© μΈν„°ν”„λ¦¬ν…ν•λ” κ²ƒλ³΄λ‹¤ ν›¨μ”¬ μ¤λ κ±Έλ¦°λ‹¤
- κ·Έλμ„, λ§μ•½μ— ν• λ²λ§ μ‹¤ν–‰λλ” μ½”λ“λΌκ³  ν•λ©΄, μ»΄νμΌν•μ§€ μ•κ³  μΈν„°ν”„λ¦¬ν…ν•λ” κ²ƒμ΄ ν›¨μ”¬ μ λ¦¬ν•λ‹¤
- JIT μ»΄νμΌλ¬λ¥Ό μ‚¬μ©ν•λ” JVMλ“¤μ€ λ‚΄λ¶€μ μΌλ΅ ν•΄λ‹Ή λ©”μ„λ“κ°€ μ–Όλ§λ‚ μμ£Ό μν–‰λλ”μ§€ μ²΄ν¬ν•κ³ , μΌμ • μ •λ„λ¥Ό λ„μ„ λ•μ—λ§ μ»΄νμΌμ„ μν–‰ν•λ‹¤

## JIT μ»΄νμΌλ¬μ λ™μ‘ λ°©μ‹
1. λ°”μ΄νΈμ½”λ“λ¥Ό μ¤‘κ°„ λ‹¨κ³„μ ν‘ν„μΈ IR (Intermediate Representation) μΌλ΅ λ³€ν™ν•μ—¬ μµμ ν™”λ¥Ό μν–‰ν•κ³  κ·Έ λ‹¤μ λ„¤μ΄ν‹°λΈ μ½”λ“λ¥Ό μν–‰ν•λ‹¤

## κΌ¬λ¦¬λ¬ΌκΈ° μ§λ¬Έ μ¤ν„°λ””
### `==`, `equals`, `hashcode`
- `==` : λ™μΌμ„± λΉ„κµ μ—°μ‚°μ
- `equals` : λ™λ“±μ„± λΉ„κµ μ—°μ‚°μ
- `hashcode` : λ™λ“±μ„± λΉ„κµ μ—°μ‚°μ

### HashTableμ΄ μ΅΄μ¬ν•λ” μ΄μ μ™€ HashMapμ μ°¨μ΄μ 
- HashTableμ€ μ΅΄μ¬ λ©μ μ΄ μ¤μ§ ν•μ„ νΈν™μ„±μ— μλ‹¤
- HashTableμ€ Thread-safeν•λ‹¤
  - λ¨λ“  data λ³€κ²½ λ©”μ„λ“μ— `synchronized` λ΅ μ„ μ–Έλμ–΄ μμ–΄μ„ λ©€ν‹° μ“°λ λ“ ν™κ²½μ—μ„ dataμ λ¬΄κ²°μ„±μ„ λ³΄μ¥ν•΄μ¤€λ‹¤
- HashMapμ€ Thread-safeν•μ§€ μ•λ‹¤
  - λ©€ν‹° μ“°λ λ“ ν™κ²½μ—μ„ λ™μ‹μ— κ°μ²΄μ dataλ¥Ό μ΅°μ‘ν•λ” κ²½μ° dataκ°€ κΉ¨μ§ μ μλ‹¤

### μΈν„°νμ΄μ¤μ™€ μ¶”μƒν΄λμ¤μ μ°¨μ΄
- μ¤μ¤λ΅ μΈμ¤ν„΄μ¤ν™”λ¥Ό ν•  μ μλ”μ§€
- λ‹¤μ¤‘ μƒμ†μ„ ν—μ©ν•λ”μ§€
- μ‚¬μ© λ©μ μ μ°¨μ΄
  - μ¶”μƒ ν΄λμ¤ : μƒμ†μ— μ΄μ μ„ λ§μ¶¤
  - μΈν„°νμ΄μ¤ : λ‹¤ν•μ„±μ— μ΄μ μ„ λ§μ¶¤

### final ν‚¤μ›λ“
- ν΄λμ¤μ— final : λ” μ΄μƒ μƒμ†μ„ ν•  μ μ—†λ” ν΄λμ¤
- λ©”μ†λ“μ— final : λ” μ΄μƒ μ¤λ²„λΌμ΄λ”©μ„ ν•  μ μ—†λ” λ©”μ†λ“
- λ³€μμ— final 
  - Primitive Type : κ°’μ„ λ³€κ²½ν•  μ μ—†μ
  - Reference Type : μ°Έμ΅° μ£Όμ† κ°’μ„ λ³€κ²½ν•  μ μ—†μ

### Enum
- μ—΄κ±°ν• (μ—°μ†λ κ°’μ΄λ‚ νΉμ • λ²”μ£Ό λ‚΄μ κ°’μ„ λ‚νƒ€λ‚΄κ³ μ ν•  λ• μ‚¬μ©ν•λ‹¤)

### Rehashing
- μ΄λ―Έ μ €μ¥λμ–΄ μλ” μ”μ†λ“¤μ hashcodeλ¥Ό μƒλ΅ κ³„μ‚°ν•΄μ„ hash μλ£κµ¬μ΅° μ‚¬μ΄μ¦λ¥Ό λλ¦¬κ³ , μƒλ΅μ΄ ν•΄μ‹ κ°’μ— κΈ°λ°ν•΄μ„ μƒλ΅μ΄ λ²„ν‚·μΌλ΅ μ”μ†λ¥Ό μ®κΈ°λ” κ³Όμ •
#### μ™ Rehashingμ„ ν•λ” κ²ƒμΌκΉ?
- λ†’μ€ threshold λ΅ μΈν•΄ λ°μƒν•λ” ν•΄μ‹ μ¶©λμ„ λ§‰κ³ , hash μλ£κµ¬μ΅°μ ν¨μ¨μ μΈ νƒμƒ‰μ„ μ μ§€ν•λ ¤κ³  rehashingμ„ μ§„ν–‰ν•λ‹¤

### Marker Interface
- Metadataλ¥Ό λ‚νƒ€λ‚΄κΈ° μ„ν•΄μ„ μ‚¬μ©ν•λ‹¤
- μ»΄νμΌλ¬μ—κ² νΉμ •ν• μ •λ³΄λ¥Ό μ κ³µν•λ ¤λ” λ©μ μΌλ΅ μ‚¬μ©ν•λ‹¤
